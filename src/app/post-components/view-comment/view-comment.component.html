<ion-card class="comment">
  <div class="user-header">
    <ion-avatar
      class="user-avatar"
      (click)="userService.goToProfile(comment.user.username,comment.user._id,'comment',undefined)"
    >
      <img  [src]="comment.user.photo">
      <div class="connectedDIVlittle" *ngIf="comment.user.connected"></div>
    </ion-avatar>
    <div class="name-content" style="padding: 5px;">
      <p
        class="name profile-name"
        (click)="userService.goToProfile(comment.user.username,comment.user._id,'comment',undefined)"
        >{{ comment.user.name }} {{ comment.user.last_name }}</p
      >
      <span *ngIf="!comment.edited" class="date-span"> {{ comment.date | customDisplayDate }}</span>
      <span *ngIf="comment.edited" class="date-span">{{'edit_at' | translate}} {{ comment.edited | customDisplayDate }}</span>
    </div> 
    <ion-icon
    *ngIf="comment.user._id == userService.User?._id && !preview"
    name="chevron-down"
    (click)="openOptions($event)"
    class="options-down"
  ></ion-icon>
  </div>


  <div style="padding: 5px">
    <span *ngIf="comment.message" [innerHTML]="comment.message | links"></span>
    <div class="img-comments-container">
      <ng-container *ngFor="let file of comment.files">
        <ng-container [ngSwitch]="file.format">
          <ion-img
            (click)="openImg()"
            class="img-comment"
            *ngSwitchCase="'image'"
            [src]="file.url"
          >
          </ion-img>
          <div
            (click)="openImg()"
            style="position: relative"
            class="img-comment"
            *ngSwitchCase="'video'"
          >
            <video controls preload="metadata" class="video-comment">
              <source [src]="file.url | safeUrl" type="video/mp4" />
            </video>
          </div>
          <attach-link-preview-post
            *ngSwitchCase="'link'"
            [file]="file"
          ></attach-link-preview-post>
        </ng-container>
      </ng-container>
    </div>
    <question-comment
      *ngIf="comment.question"
      [questionId]="comment.question"
    ></question-comment>
  </div>
  <ng-container *ngIf="!preview" >
    <comment-options [comment]="comment"></comment-options>
    <view-responds-comment *ngIf="countComments > 0" [comment]="comment"></view-responds-comment>
  
  </ng-container>
</ion-card>
